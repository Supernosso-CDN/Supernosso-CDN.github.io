/* DESKTOP-K68GTNR - 08/09/2020 16:28:13 GMT */
"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});"function"!=typeof String.prototype.capitalize&&(String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1).toLowerCase()});"function"!==typeof String.prototype.replaceSpecialChars&&(String.prototype.replaceSpecialChars=function(){var b={"ç":"c","æ":"ae","œ":"oe","á":"a","é":"e","í":"i","ó":"o","ú":"u","à":"a","è":"e","ì":"i","ò":"o","ù":"u","ä":"a","ë":"e","ï":"i","ö":"o","ü":"u","ÿ":"y","â":"a","ê":"e","î":"i","ô":"o","û":"u","å":"a","ã":"a","ø":"o","õ":"o",u:"u","Á":"A","É":"E","Í":"I","Ó":"O","Ú":"U","Ê":"E","Ô":"O","Ü":"U","Ã":"A","Õ":"O","À":"A","Ç":"C"};return this.replace(/[\u00e0-\u00fa]/gi,function(a){return"undefined"!=typeof b[a]?b[a]:a})});Array.prototype.indexOf||(Array.prototype.indexOf=function(d,e){var a;if(null==this)throw new TypeError('"this" is null or not defined');var c=Object(this),b=c.length>>>0;if(0===b)return-1;a=+e||0;Infinity===Math.abs(a)&&(a=0);if(a>=b)return-1;for(a=Math.max(0<=a?a:b-Math.abs(a),0);a<b;){if(a in c&&c[a]===d)return a;a++}return-1});try{var Common={run:function(){},init:function(){Common.checkLogin();Common.watchQuantityButtons();Common.h2beforeShelf();Common.menuLateralFeiraDeVinhos();Common.feiraSendEmailMasterData();Common.setProductAdded();Common.verifyCep();Common.primeCartDemonstration();Common.addclearCartBtn();Common.clearCart()},ready:function(){},ajaxStop:function(){Common.watchQuantityAndCart();Common.removeProductAddCart();Common.setProductAdded()},windowOnload:function(){Common.watchProductsCart();Common.setProductInfo();Common.shelfCountryFlag()},vtexBindQuickViewDestroy:function(){},openAndCloseMenuLateral:function(){if($(".menu-lateral").css("right")=="0px"){$(".menu-lateral").css("right","-"+$(".menu-lateral").css("max-width"));$(".container-menu-close").css("display","none")}else{$(".menu-lateral").css("right",0);$(".container-menu-close").css("display","block")}},menuLateralFeiraDeVinhos:function(){if($("body").hasClass("feira-de-vinhos")){$("header").find(".menu").click(function(){Common.openAndCloseMenuLateral();$("body").addClass("overflow-hidden")});$("header .menu-lateral .container-menu-close").click(function(){Common.openAndCloseMenuLateral();$("body").removeClass("overflow-hidden")});$("header .menu-lateral .close").click(function(){Common.openAndCloseMenuLateral();$("body").removeClass("overflow-hidden")})}},checkLogin:function(){$.ajax({type:"GET",url:"/no-cache/profileSystem/getProfile",dataType:"json",clearQueueDelay:null,success:function(data){try{if(data.IsUserDefined){var emailReceived=data.Email;var nameUser=emailReceived.match(/([^{0-9}|.|@|-]+)/).pop();console.log("Usuario Logado!");$("#header-mobile .logged-out").first().hide();$(".user-mobile-data a[href] span, .user-data-toggle strong, .user-data-header .user-name span").text(nameUser);$(".user-info a[href] strong").text(nameUser);$(".user-info a").attr("href","javascript:;");$(".user-info a").addClass("user-data-toggle");$(".user-info a").click(function(){$("body").toggleClass("overflow-hidden");$("#user-data").toggleClass("user-data-opened")})}else{console.log("Nenhum usuario logado.")}}catch(e){if(typeof console!=="undefined"&&typeof console.info==="function")console.info("Ops, algo saiu errado com o login.",e.message)}}})},watchProductsCart:function(){var listItemsMiniCart=vtexjs.checkout.orderForm.items;listItemsMiniCart.forEach(function(item){var pdId=item.productId;if($('.product-qty[data-product-id="'+pdId+'"]').closest(".item-shelf").find(".flag-adicionado").length){return}$('.product-qty[data-product-id="'+pdId+'"]').closest(".item-shelf").children(".product-image, .promo-flags, .product-name, .price").addClass("active-opacity");$('.product-qty[data-product-id="'+pdId+'"]').closest(".item-shelf").append('<span class="flag-adicionado">Adicionado</span>')})},h2beforeShelf:function(){var wrapper=$(".prateleira.supernossoshelf");wrapper.each(function(){var $t=$(this);$t.find("h2").prependTo($t.parent())})},setProductAdded:function(){if(!$(".buy-button-normal a").length)return;$(".buy-button-normal a").on("click",function(e){var $buyButton=$(this);$buyButton.addClass("clicked");setTimeout(function(){$buyButton.removeClass("clicked")},3e3);$(window).on("orderFormUpdated.vtex",function(evt,orderForm){Common.watchProductsCart()})})},removeProductAddCart:function(){$(".products-list").on("click",".product-remove",function(){var $t=$(this);var thisId=$t.attr("id");var searchShelf=$('li[layout] .buy-button-normal[id="'+$t.attr("id")+'"]');if(thisId==searchShelf.attr("id")){searchShelf.closest(".item-shelf").find(".flag-adicionado").remove();searchShelf.closest(".item-shelf").children().removeClass("active-opacity")}})},watchQuantityAndCart:function(){$("li[layout]").each(function(){var $t=$(this);var thisInputQtt=$t.find(".shelf-input-qty-control");if(thisInputQtt.val()==0){$t.find(".product-image, .promo-flags, .product-name, .price").removeClass("active-opacity");$t.find(".flag-adicionado").remove()}})},feiraSendEmailMasterData:function(){$(".btn-send-newsletter").click(function(e){e.preventDefault();var email=$(".container-newsletter").find("input[type=email]").val();var name=$(".container-newsletter").find("input[name=qd-nome]").val();if(validateEmail(email)){var dataJson={email:email,firstName:name};$.ajax({type:"PATCH",method:"PATCH",url:"/api/dataentities/CL/documents",dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"},data:JSON.stringify(dataJson)}).success(function(data){toastr.success("você foi cadastrado com sucesso!")}).fail(function(data){toastr.error("ocorreu um erro, verifique se o e-mail esta correto ou tente novamente mais tarde.")});$(".form-newsletter").find("input[type=email]").val("")}else if(email==""){toastr.error("Por favor preencha o campo de email.")}else if(name==""){toastr.warning("Por favor preencha o campo de nome.")}else if(!validateEmail(email)&&email!=""){toastr.warning("Email no formato incorreto.")}});function validateEmail(email){var regex=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return regex.test(email)}},shelfCountryFlag:function(){if($("body").hasClass("feira-de-vinhos")){$(".item-shelf").each(function(){var shelfCountryImg;var shelfCountryImgTwo;var itemShelf=$(this);$.ajax({url:"/api/catalog_system/pub/products/search?fq=productId:"+$(this).attr("data-product-id"),type:"GET",dataType:"json",success:function(data){if(data[0]["Pais"]){shelfCountryImgTwo=data[0]["Pais"][0]}else if(data[0]["País de Origem"]){shelfCountryImg=data[0]["País de Origem"][0]}if(shelfCountryImg=="Itália"||shelfCountryImgTwo=="Itália"){$(itemShelf).find(".product-image").append('<img class="country-flag" src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_italia.png" alt="">')}else if(shelfCountryImg=="Argentina"||shelfCountryImgTwo=="Argentina"){$(itemShelf).find(".product-image").append('<img class="country-flag" src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_argentina.png" alt="">')}else if(shelfCountryImg=="França"||shelfCountryImgTwo=="França"){$(itemShelf).find(".product-image").append('<img class="country-flag" src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_franca.png" alt="">')}else if(shelfCountryImg=="Brasil"||shelfCountryImgTwo=="Brasil"){$(itemShelf).find(".product-image").append('<img class="country-flag" src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_brasil.png" alt="">')}else if(shelfCountryImg=="Chile"||shelfCountryImgTwo=="Chile"){$(itemShelf).find(".product-image").append('<img class="country-flag" src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira-chile.png" alt="">')}else if(shelfCountryImg=="Austrália"||shelfCountryImgTwo=="Austrália"){$(itemShelf).find(".product-image").append('<img class="country-flag" src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_australia.png" alt="">')}else if(shelfCountryImg=="Alemanha"||shelfCountryImgTwo=="Alemanha"){$(itemShelf).find(".product-image").append('<img class="country-flag" src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_alemanha.png" alt="">')}else if(shelfCountryImg=="África do Sul"||shelfCountryImgTwo=="África do Sul"){$(itemShelf).find(".product-image").append('<img class="country-flag" src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_africa_do_sul.png" alt="">')}else if(shelfCountryImg=="Nova Zelândia"||shelfCountryImgTwo=="Nova Zelândia"){$(itemShelf).find(".product-image").append('<img class="country-flag" src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_nova_zelandia.png" alt="">')}else if(shelfCountryImg=="Hungria"||shelfCountryImgTwo=="Hungria"){$(itemShelf).find(".product-image").append('<img class="country-flag" src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_hungria.png" alt="">')}else if(shelfCountryImg=="Espanha"||shelfCountryImgTwo=="Espanha"){$(itemShelf).find(".product-image").append('<img class="country-flag" src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_espanha.png" alt="">')}else if(shelfCountryImg=="Estados Unidos"||shelfCountryImgTwo=="Estados Unidos"){$(itemShelf).find(".product-image").append('<img class="country-flag" src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_eua.png" alt="">')}else if(shelfCountryImg=="Portugal"||shelfCountryImgTwo=="Portugal"){$(itemShelf).find(".product-image").append('<img class="country-flag" src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_portugal.png" alt="">')}}})})}},setProductInfo:function(){if($("body").hasClass("products-qd-feira-de-vinhos")){var countryImg;var countryRegion;$.ajax({url:"/api/catalog_system/pub/products/search?fq=productId:"+skuJson.productId,type:"GET",dataType:"json",success:function(data){if(data[0]["Pais"]){countryImg=data[0]["Pais"][0]}else if(data[0]["País de Origem"]){countryImg=data[0]["País de Origem"][0]}$(".top-block-name").find("h1").append('<span class="product-description"><a href="#">'+countryImg+'</a></span><span class="product-description"><a href="#">'+data[0].Tipo+'</a></span> <span class="product-description"><a href="#">'+data[0].classificacao+"</a></span>");if(data[0].regiao){countryRegion=data[0].regiao}else if(data[0]["País de Origem"]){countryRegion=data[0]["País de Origem"][0]}else if(data[0]["Pais"]){countryRegion=data[0]["Pais"][0]}if(countryImg=="Portugal"){$(".product-qd-v1-brand").html('<img src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_portugal.png"/>'+countryRegion);$(".product-qd-v1-card-name").find("img").attr("src","https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_portugal.png")}else if(countryImg=="Argentina"){$(".product-qd-v1-brand").html('<img src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_argentina.png"/>'+countryRegion);$(".product-qd-v1-card-name").find("img").attr("src","https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_argentina.png")}else if(countryImg=="França"){$(".product-qd-v1-brand").html('<img src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_franca.png"/>'+countryRegion);$(".product-qd-v1-card-name").find("img").attr("src","https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_franca.png")}else if(countryImg=="Brasil"){$(".product-qd-v1-brand").html('<img src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_brasil.png"/>'+countryRegion);$(".product-qd-v1-card-name").find("img").attr("src","https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_brasil.png")}else if(countryImg=="Chile"){$(".product-qd-v1-brand").html('<img src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira-chile.png"/>'+countryRegion);$(".product-qd-v1-card-name").find("img").attr("src","https://supernossoemcasa.vteximg.com.br/arquivos/bandeira-chile.png")}else if(countryImg=="Austrália"){$(".product-qd-v1-brand").html('<img src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_australia.png"/>'+countryRegion);$(".product-qd-v1-card-name").find("img").attr("src","https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_australia.png")}else if(countryImg=="Alemanha"){$(".product-qd-v1-brand").html('<img src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_alemanha.png"/>'+countryRegion);$(".product-qd-v1-card-name").find("img").attr("src","https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_alemanha.png")}else if(countryImg=="África"){$(".product-qd-v1-brand").html('<img src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_bandeira_africa_do_sul.png"/>'+countryRegion);$(".product-qd-v1-card-name").find("img").attr("src","https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_africa_do_sul.png")}else if(countryImg=="Nova Zelândia"){$(".product-qd-v1-brand").html('<img src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_nova_zelandia.png"/>'+countryRegion);$(".product-qd-v1-card-name").find("img").attr("src","https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_nova_zelandia.png")}else if(countryImg=="Itália"){$(".product-qd-v1-brand").html('<img src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_italia.png"/>'+countryRegion);$(".product-qd-v1-card-name").find("img").attr("src","https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_italia.png")}else if(countryImg=="Estados Unidos"){$(".product-qd-v1-brand").html('<img src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_eua.png"/>'+countryRegion);$(".product-qd-v1-card-name").find("img").attr("src","https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_eua.png")}else if(countryImg=="Hungria"){$(".product-qd-v1-brand").html('<img src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_hungria.png"/>'+countryRegion);$(".product-qd-v1-card-name").find("img").attr("src","https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_hungria.png")}else if(countryImg=="Espanha"){$(".product-qd-v1-brand").html('<img src="https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_espanha.png"/>'+countryRegion);$(".product-qd-v1-card-name").find("img").attr("src","https://supernossoemcasa.vteximg.com.br/arquivos/bandeira_espanha.png")}$(".comentario-sommelier").text(data[0].comentarioDoSommelier);$(".product-field-01").find("ul li").text(data[0].espumante);$(".product-qd-v1").find(".product-qd-v1").text(data[0].espumante);$(".product-field-02").find("strong").text(countryImg);$(".product-field-02").find("ul li").text(data[0].regiao);$(".product-field-03").find("ul li").text(data[0].vinicola);$(".product-field-04").find("ul li").text(data[0].teorAlcoolico);$(".product-field-05").find("ul li").text(data[0].amadurecimento);$(".product-field-06").find("ul li").text(data[0].classificacao);$(".product-field-07").find("ul li").text(data[0].visual);$(".product-field-08").find("ul li").text(data[0].olfativo);$(".product-field-09").find("ul li").text(data[0].gustativo);$(".product-field-10").find("ul li").text(data[0].temperaturaDoServico);$(".product-field-10").find("ul li").text(data[0].potencialDeGuarda);$(".product-qd-v1-harmonizacao").find("p").text(data[0].indicacao)}})}},watchQuantityButtons:function(){$(".buy-button-normal a").click(function(){setTimeout(function(){$(".product-qty .shelf-less-qty, .shelf-input-qty, .product-qty .shelf-more-qty").css("pointer-events","none");$(".product-qty .shelf-less-qty, .shelf-input-qty, .product-qty .shelf-more-qty").css("opacity","0.7")},100);setTimeout(function(){$(".product-qty .shelf-less-qty, .shelf-input-qty, .product-qty .shelf-more-qty").css("pointer-events","auto");$(".product-qty .shelf-less-qty, .shelf-input-qty, .product-qty .shelf-more-qty").css("opacity","1")},3e3)})},verifyCep:function(){$(document).on("click","#sellerModal .close-modal",function(){vtexjs.checkout.getOrderForm().then(function(orderForm){var itemIndex=0;var item=orderForm.items[itemIndex];var itemsToRemove=[{index:0,quantity:0}];$(".modal-backdrop").remove();$("body").removeClass("modal-open");return vtexjs.checkout.removeAllItems(itemsToRemove)}).done(function(orderForm){$("span.badge").text(orderForm.items.length);if($(window).width()<768){$(".speech-balloon-mobile").addClass("active")}$(".speech-balloon").addClass("active");if(orderForm.items.length===0){$(".flag-adicionado").remove();$(".product-qty").css("display","none");$(".buttons buy, .buy-button-normal").css("display","block")}setTimeout(function(){$(".speech-balloon, .speech-balloon-mobile").removeClass("active")},4e3)})})},addclearCartBtn:function(){var $btn=$('<div class="mz-btn-clear-cart"><button type="button">limpar meu carrinho</button></div>');if(!$(".mz-btn-clear-cart").length){$(".cart-products").prepend($btn)}},clearCart:function(){$(".mz-btn-clear-cart button").on("click",function(){$(document.body).addClass("clear-cart-active")});$(".mz-modal-clear-cart__confirm").on("click",function(){vtexjs.checkout.removeAllItems().done(function(){window.location.reload()})});$(".mz-overlay, .mz-modal-clear-cart__cancel, .mz-modal-clear-cart__close").on("click",function(){$(document.body).removeClass("clear-cart-active")})},userCheck:function(){return $.ajax({type:"GET",url:"/no-cache/profileSystem/getProfile",dataType:"json",clearQueueDelay:null})},getIfUserIsPrime:function(userEmail){if(userEmail){return $.ajax({type:"GET",method:"GET",url:"/api/dataentities/CL/search?_where=(Prime=true AND email="+userEmail+")&_fields=Prime,email",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"}})}},getPrimeDaysToExpire:function(userEmail){return $.ajax({type:"GET",method:"GET",url:"https://mauricio.supernosso.com.br/IntegraSnc_Core/rest/IntegraSnc/GetDataFimPrime?Email="+userEmail,headers:{"Content-Type":"application/json",Accept:"application/json"}})},createPrimeTagOnCart:function(){var divCartProducts=$(".cart-top-content .cart-products");var divPrimeCart=$('<div class="prime-container-cart"></div>');divCartProducts.before(divPrimeCart);var spanClientePrime=$("<span>Cliente Prime</span>");divPrimeCart.append(spanClientePrime)},primeCartDemonstration:function(){$.when(Common.userCheck()).done(function(data){try{if(data.IsUserDefined){var userEmail="";var usuarioPrime=false;vtexjs.checkout.getOrderForm().done(function(orderForm){if(orderForm.clientProfileData&&orderForm.clientProfileData.email){userEmail=orderForm.clientProfileData.email;$.when(Common.getIfUserIsPrime(userEmail)).done(function(response){if(response.length>0){usuarioPrime=true;Common.createPrimeTagOnCart()}console.log("usuarioPrime: ",usuarioPrime);if(usuarioPrime){$.when(Common.getPrimeDaysToExpire(userEmail)).done(function(response){var dataValidadePrime=response.toString();var currentDate=(new Date).toISOString();var diasParaVencer=(new Date(dataValidadePrime)-new Date(currentDate))/(1e3*3600*24);if(diasParaVencer<=20&&diasParaVencer>0){var divPrime=$(".cart-top-content .prime-container-cart");var spanDays;if(diasParaVencer==1){spanDays=$('<a href="https://www.supernossoemcasa.com.br/prime/" class="expira">sua assinatura expira amanhã!</a>')}else{spanDays=$('<a href="https://www.supernossoemcasa.com.br/prime/" class="expira">sua assinatura expira em '+Math.round(diasParaVencer)+" dias!</a>")}divPrime.append(spanDays)}})}})}})}}catch(e){if(typeof console!=="undefined"&&typeof console.info==="function")console.info("Ops, algo saiu errado com o login.",e.message)}})}};var Cart={init:function(){Cart.syncCart()},ajaxStop:function(){},windowOnload:function(){},customLog:function(index,labelColor,message){console.log("%c "+index+" %c SNC -> %c "+message+" ","background:#212529; color: white; padding: 1px;","background:"+labelColor+"; color: white; padding: 1px;","background: green; color: white; padding: 1px;")},convertEmailToId:function(email){var email=(email||"").toLowerCase().replace(/[^a-z0-9]/gi,function(v){return"-"+v.charCodeAt(0)+"-"});return email},userIsLogged:function(){if(!!vtexjs&&!!vtexjs.checkout&&!!vtexjs.checkout.orderForm){if(typeof vtexjs.checkout.orderForm.loggedIn!=="undefined"){return vtexjs.checkout.orderForm.loggedIn}return false}return false},storesAnonymousCart:function(cart){var anonymousCart=Cart.zipCart(cart);localStorage.setItem("@SNC:anonymousCart",JSON.stringify(anonymousCart));Cart.customLog("1","darkorange","Salvando carrinho anônimo... ("+anonymousCart.length+") items")},getCartFromMasterData:function(){var anonymousCart=Cart.zipCart(vtexjs.checkout.orderForm.items);var email=Cart.userEmail();if(!email||!anonymousCart)return;Cart.customLog("1","#841f27","Obtendo carrinho anônimo... ("+anonymousCart.length+" items)");Cart.customLog("2","darkorange","Obtendo carrinho do Master Data...");$.ajax({url:"/api/dataentities/CA/documents/"+email+"?_fields=id,items",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"}}).done(function(response){if(!!response.items&&JSON.parse(response.items).length){var oldCart=JSON.parse(response.items);Cart.customLog("3","#F71963",JSON.parse(response.items).length+" items encontrados no Master Data");localStorage.setItem("@SNC:oldCart",JSON.stringify(oldCart));if(JSON.stringify(anonymousCart)===response.items){Cart.customLog("4","darkorange","Carrinho sincronizado")}if(!Cart.syncIsdone()&&JSON.stringify(anonymousCart)!==response.items){Cart.askUser()}}else{Cart.customLog("3","darkorange","Usuário não tem carrinho no Master Data");Cart.sendCartToMasterData(email,anonymousCart);localStorage.setItem("@SNC:oldCart",JSON.stringify(anonymousCart))}})},sendCartToMasterData:function(userEmail,items,callback){var data={id:userEmail,items:JSON.stringify(items)};$.ajax({type:"PATCH",method:"PATCH",url:"/api/dataentities/CA/documents",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"},data:JSON.stringify(data)}).done(function(){localStorage.setItem("@SNC:anonymousCart",JSON.stringify(items));console.log("%cSNC -> %cCarrinho enviado pro Master Data!","background: #F71963; color: white; padding: 1px;","background: green; color: white; padding: 1px;");Cart.syncDone();if(callback){callback()}})},syncIsdone:function(){var cartSync=JSON.parse(localStorage.getItem("@SNC:cartSync"));if(!cartSync){return null}return cartSync},syncDone:function(){localStorage.setItem("@SNC:cartSync",true)},userEmail:function(){var email=Cart.userIsLogged()&&!!vtexjs&&!!vtexjs.checkout&&!!vtexjs.checkout.orderForm&&!!vtexjs.checkout.orderForm.clientProfileData?Cart.convertEmailToId(vtexjs.checkout.orderForm.clientProfileData.email):"";return email},anonymousCart:function(){var cart=[];for(var i=0;i<vtexjs.checkout.orderForm.items.length;i++){var item=vtexjs.checkout.orderForm.items[i];var obj={id:item.id,quantity:item.quantity,seller:item.seller};cart.push(obj)}return cart},syncCart:function(){if(Cart.userIsLogged()){if(!Cart.syncIsdone()){Cart.getCartFromMasterData()}else{var email=Cart.userEmail();var anonymousCart=Cart.anonymousCart();if(email&&anonymousCart.length){Cart.sendCartToMasterData(email,anonymousCart)}}$(".user-logout").on("click",function(){localStorage.removeItem("@SNC:cartSync")})}else{var cart=vtexjs.checkout.orderForm.items;Cart.storesAnonymousCart(cart);localStorage.removeItem("@SNC:cartSync")}Cart.watchCart()},askUser:function(){var salesChannel=!!vtexjs&&!!vtexjs.checkout&&!!vtexjs.checkout.orderForm&&!!vtexjs.checkout.orderForm.salesChannel?vtexjs.checkout.orderForm.salesChannel:1;var timeout=0;var timer=setInterval(function(){timeout++;var oldCart=JSON.parse(localStorage.getItem("@SNC:oldCart"));if(timeout>20){clearInterval(timer)}if(oldCart&&oldCart.length){var anonymousCart=JSON.parse(localStorage.getItem("@SNC:anonymousCart"));$(document.body).addClass("sync-cart-active");$(".mz-modal-sync-cart__confirm").on("click",function(){for(var i=0;i<oldCart.length;i++){for(var j=0;j<anonymousCart.length;j++){if(oldCart[i].id===anonymousCart[j].id&&anonymousCart[j].quantity<oldCart[i].quantity){oldCart[i]=anonymousCart[j]}}}vtexjs.checkout.addToCart(oldCart,null,salesChannel).done(function(orderForm){var email=Cart.convertEmailToId(orderForm.clientProfileData.email);Cart.sendCartToMasterData(email,oldCart,function(){$(document.body).removeClass("sync-cart-active");window.location.reload()})})});$(".mz-overlay, .mz-modal-sync-cart__cancel, .mz-modal-sync-cart__close").on("click",function(){Cart.syncDone();$(document.body).removeClass("sync-cart-active");window.location.reload()});clearInterval(timer)}},300)},zipCart:function(cart){var zippedCart=[];for(var i=0;i<cart.length;i++){var item=cart[i];var zippedItem={id:item.id,quantity:item.quantity,seller:item.seller};zippedCart.push(zippedItem)}return zippedCart},watchCart:function(){var update=false;$(window).on("orderFormUpdated.vtex",function(evt,orderForm){var anonymousCart=localStorage.getItem("@SNC:anonymousCart");var newCart=Cart.zipCart(orderForm.items);if(JSON.stringify(newCart)!==anonymousCart){update=true}if(update){update=false;console.log("orderForm updated");if(Cart.userIsLogged()){var email=Cart.userEmail();Cart.sendCartToMasterData(email,newCart)}else{Cart.storesAnonymousCart(newCart)}}})}};var Home={init:function(){Home.sendEmailMasterData()},ajaxStop:function(){},windowOnload:function(){},sendEmailMasterData:function(){if($("body").find(".btn-send-newsletter").length>0){$("#terms")[0].checked=true}$(".btn-send-newsletter").click(function(e){e.preventDefault();var email=$(".form-newsletter").find("input[type=email]").val();var terms=$("#terms");if(validateEmail(email)&&terms[0].checked){var dataJson={email:email,isNewsletterOptIn:true};$.ajax({type:"PATCH",method:"PATCH",url:"/api/dataentities/CL/documents",dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"},data:JSON.stringify(dataJson)}).success(function(data){toastr.success("você foi cadastrado com sucesso!")}).fail(function(data){toastr.error("ocorreu um erro, verifique se o e-mail esta correto ou tente novamente mais tarde.")});$(".form-newsletter").find("input[type=email]").val("")}else if(email==""){toastr.error("Por favor preencha o campo de email.")}else if(!validateEmail(email)&&email!=""){toastr.warning("Email no formato incorreto.")}else if(!terms[0].checked){toastr.warning("É necessário aceitar as políticas de privacidade antes de prosseguir.")}});function validateEmail(email){var regex=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return regex.test(email)}}};var Search={init:function(){Search.unavaiableOrder();Search.applyCategoryFilter();Search.forceLoadMore();Search.loadMore()},ajaxStop:function(){Search.verifyButton();Search.forceLoadMore()},windowOnload:function(){},unavaiableOrder:function(){var wrapperHide=$('<div class="mz-shelf-out hide"></div>');wrapperHide.appendTo($("div[id*='ResultItems_'] > .prateleira").first());var wrapperLoadPage=$("div[id*='ResultItems_'] > .prateleira").first().find("> ul");wrapperLoadPage.children().each(function(){var $t=$(this);if($t.children().is(".out-stock")){$t.appendTo(wrapperHide)}});$("#collections .load-more").click(function(){setTimeout(function(){var wrapperUL=$("div[id*='ResultItems_'] > .prateleira > ul");var wrapperFirst=$("div[id*='ResultItems_'] > .prateleira").first().find("> ul");wrapperFirst.parent().addClass("mz-result-shelf-first");wrapperUL.parent().not(".mz-result-shelf-first").children().children().each(function(){var $t=$(this);if(!$t.find(".item-shelf").is(".out-stock")){$t.appendTo(wrapperFirst)}});wrapperUL.children().each(function(){var $t=$(this);if($t.find(".item-shelf").is(".out-stock")){$t.appendTo(wrapperHide)}});$("div[id*='ResultItems_'] > .prateleira").each(function(){var $t=$(this);if($t.is(".mz-result-shelf-first")||$t.is(".mz-shelf-out")){}else if($t.find("ul").children().length==0){$t.next().remove();$t.remove()}})},2500)})},verifyButton:function(){setTimeout(function(){var wrapperFirst=$("div[id*='ResultItems_'] > .prateleira").first().find("> ul");if($("#collections .load-more").length==0){$(".mz-shelf-out").children().each(function(){var $t=$(this);$t.appendTo(wrapperFirst)})}},1500)},applyCategoryFilter:function(){$("body.feira-de-vinhos").find(".promo-flags").remove();$("#departament-navegador input[type='checkbox']").vtexSmartResearch({elemLoading:"",authorizeScroll:function(){return false},ajaxCallback:function(o){},pageLimit:null,authorizeUpdate:function(){return true}})},forceLoadMore:function(){if(!$("#collections .load-more").length)return;$("#collections .load-more").show()},loadMore:function(){function disableScroll(){scrollTop=window.pageYOffset||document.documentElement.scrollTop;scrollLeft=window.pageXOffset||document.documentElement.scrollLeft,window.onscroll=function(){window.scrollTo(scrollLeft,scrollTop)}}function enableScroll(){window.onscroll=function(){}}$(".load-more").on("click",function(){disableScroll();var timeout=0;var oldItems=$(".prateleira li:not(.helperComplement)").length;var interval=setInterval(function(){var newItems=$(".prateleira li:not(.helperComplement)").length;if(oldItems!==newItems){setTimeout(function(){enableScroll()},500);clearInterval(interval)}else{timeout++}if(timeout===20){timeout=0;clearInterval(interval);enableScroll()}},300)})}};var Product={run:function(){},init:function(){Product.setAvailableBodyClass();Product.incrementProduct();Product.applySmartQuantity();Product.decrementProduct()},ajaxStop:function(){Product.thumbActive();Product.dynamicDiscountFlag()},windowOnload:function(){},setAvailableBodyClass:function(){function checkVisibleNotify(available){if(available)$(document.body).addClass("qd-product-available").removeClass("qd-product-unavailable");else $(document.body).addClass("qd-product-unavailable").removeClass("qd-product-available")}$(document).on("skuSelected.vtex",function(e,id,sku){checkVisibleNotify(sku.available)});checkVisibleNotify(skuJson.available)},dynamicDiscountFlag:function(){var $de=$(".skuListPrice").first().text();if(!$de.length)return;$(".dynamic-discount-flag").remove();var $por=$(".skuBestPrice").first().text();var $porcentagemFinal;var $boxDynamicDiscountFlag=$('<div class="dynamic-discount-flag"></div>');var $highlightDiscount=$('<span class="product-highlight-discount"></span>');var $novoDe=$('<span class="produto-novo-de"></span>');var $productPrice=$(".price-list-price").first();$boxDynamicDiscountFlag.appendTo($productPrice);$novoDe.appendTo($boxDynamicDiscountFlag);$highlightDiscount.appendTo($boxDynamicDiscountFlag);$de=$de.replace(/[R$ ]+/g,"");$de=$de.replace(/[,]+/g,".");$de=parseFloat($de);$por=$por.replace(/[R$ ]+/g,"");$por=$por.replace(/[,]+/g,".");$por=parseFloat($por);$porcentagemFinal=100-$por*100/$de;$(".produto-novo-de").text($(".skuListPrice").first().text());$(".product-highlight-discount").text(""+Math.floor($porcentagemFinal)+"% OFF")},applySmartQuantity:function(){$(".product-qd-v1-card").addClass("qd-on").QD_smartQuantity({buyButton:".buy-button"})},incrementProduct:function(){var inputQuantity=1;$(document).on("click",".qd-sq-more",function(e){inputQuantity+=1;vtexjs.checkout.getOrderForm().then(function(orderForm){if(orderForm.items[0]){$(".product-qd-v1-card-bottom").find(".product-qd-v1-smart-quantity-box").css("display","flex");var itemIndex=0;var item=orderForm.items[itemIndex];var quantidade=inputQuantity;var updateItem={index:itemIndex,quantity:quantidade};return vtexjs.checkout.updateItems([updateItem],null,false)}else{$(".product-qd-v1-card-bottom").find(".product-qd-v1-smart-quantity-box").css("display","none")}}).done(function(orderForm){})})},decrementProduct:function(){$(document).on("click",".qd-sq-minus",function(e){vtexjs.checkout.getOrderForm().then(function(orderForm){if(orderForm.items[0]){var inputQuantity=orderForm.items[0].quantity;var itemIndex=0;var quantidade=inputQuantity-1;var updateItem={index:itemIndex,quantity:quantidade};return vtexjs.checkout.updateItems([updateItem],null,false)}}).done(function(orderForm){});if(window.cartLoading){return}var el=$(this).parent().find("input.shelf-input-qty-control")})},thumbActive:function(){$(".product-qd-v1-image-thumbs li:first-child a").addClass("ON")}};var List={run:function(){},init:function(){},ajaxStop:function(){},windowOnload:function(){}};var Institutional={actionsfilterDataFeiraDeVinhos:function(){var menuFilter_LivesCursos=$(".container-lives-cursos-feira-de-vinhos .menu-filter-date-feira-de-vinhos");var menuFilter_VinhosCategoria=$(".container-vinhos-por-categoria-feira-de-vinhos .menu-filter-date-feira-de-vinhos");menuFilter_LivesCursos.find("li").click(function(){var sliderLives=$(".slider-lives-feira-de-vinhos");var sliderCursos=$(".slider-cursos-feira-de-vinhos");var index=menuFilter_LivesCursos.find("li").index(this);menuFilter_LivesCursos.find("li").removeClass("active");$(this).addClass("active");Institutional.filterDataFeiraDeVinhos(index,sliderLives,sliderLives,function(e){$(e).slick("refresh")});Institutional.filterDataFeiraDeVinhos(index,sliderCursos,sliderCursos,function(e){$(e).slick("refresh")})});menuFilter_VinhosCategoria.find("li").click(function(){var sliderPrateleira=$(".sliders-vinhos-por-categoria .slider-produtos .prateleira");var parent=$(".sliders-vinhos-por-categoria .slider-produtos");var index=menuFilter_VinhosCategoria.find("li").index(this);menuFilter_VinhosCategoria.find("li").removeClass("active");$(this).addClass("active");Institutional.filterDataFeiraDeVinhos(index,parent,sliderPrateleira,function(e){$(e).slick("refresh")})})},filterDataFeiraDeVinhos:function(i,parent,element,callback){parent.css("display","none");if($("body").hasClass("feira-de-vinhos-home"))$(parent[i]).css("display","flex");else $(parent[i]).css("display","block");setTimeout(function(){callback(element[i])},10)},filtroDataHomeFeiraDeVinhos:function(){$(".filtro-data li").click(function(){console.log(this)})},slickSliderBannerPrincipalHomeFeiraDeVinhos:function(){if($("body").hasClass("feira-de-vinhos-home")){$(".banner-principal-feira-de-vinhos").slick({dots:true,arrows:false})}},initSlickSliderBannerLivesHomeFeiraDeVinhos:function(){if($("body").hasClass("feira-de-vinhos-home")){$(".slider-lives-feira-de-vinhos").slick({dots:true,infinite:false,nextArrow:'<button type="button" class="slick-next"></button>',prevArrow:'<button type="button" class="slick-prev"></button>',responsive:[{breakpoint:480,settings:{infinite:false,dots:false,centerMode:true,centerPadding:"12px"}}]})}},slickSliderBannerVinhosPorCategoria:function(){if($("body").hasClass("feira-de-vinhos-home")){var prateleira=$(".sliders-vinhos-por-categoria .slider-produtos .prateleira");if($(window).width()<=480){prateleira.find(".helperComplement").remove();prateleira.find("ul li[layout]").each(function(i,e){console.log($(e));if($(e).html().indexOf("helperComplement")==-1)$(e).parents(".prateleira").append("<ul><li>"+$(e).html()+"</li></ul>");if($(e).hasClass("last"))$(e).parent().remove();$(e).remove()})}prateleira.slick({dots:false,infinite:false,slidesToShow:1,slidesToScroll:1,arrows:true,nextArrow:'<button type="button" class="slick-next"></button>',prevArrow:'<button type="button" class="slick-prev"></button>',responsive:[{breakpoint:480,settings:{infinite:false,slidesToShow:1,slidesToScroll:false,dots:false,centerMode:true}}]})}},slickSliderBannerVinhosArmonizamHomeFeiraDeVinhos:function(){if($("body").hasClass("feira-de-vinhos-home")){if($(".slider-vinhos-que-harmonizam .box-banner").length==0){setTimeout(function(){Institutional.slickSliderBannerVinhosArmonizamHomeFeiraDeVinhos()},100);return}var vinhos_harmonizam=$(".slider-vinhos-que-harmonizam .box-banner");vinhos_harmonizam.each(function(i,e){V_h=$(e);V_h.append($("<span>"+V_h.find("img").attr("alt")+"</span>"));setTimeout(function(){if(vinhos_harmonizam.length-1==i){$(".slider-vinhos-que-harmonizam").slick({dots:false,infinite:true,slidesToShow:4,slidesToScroll:1,arrows:true,nextArrow:'<button type="button" class="slick-next"></button>',prevArrow:'<button type="button" class="slick-prev"></button>',responsive:[{breakpoint:480,settings:{infinite:false,slidesToShow:1,dots:false,centerMode:true}}]})}},10)})}},slickSliderBandeirasPaises:function(){if($("body").hasClass("feira-de-vinhos-home")){if($(window).width()<=480){$(".pais-favorito").slick({responsive:[{breakpoint:480,settings:{infinite:true,dots:false,centerMode:true,centerPadding:"25px",arrows:false,slidesToShow:3}}]})}}},slickSliderCursosHomeFeiraDeVinhos:function(){if($("body").hasClass("feira-de-vinhos-home")){$(".slider-cursos-feira-de-vinhos").slick({dots:true,infinite:false,nextArrow:'<button type="button" class="slick-next"></button>',prevArrow:'<button type="button" class="slick-prev"></button>',responsive:[{breakpoint:480,settings:{infinite:false,dots:false,centerMode:true,centerPadding:"12px"}}]})}},explodeTextCursosFeiraDeVinhos:function(find,end,text){if(typeof text!="undefined"){if(text.indexOf(find)==-1)return;text_init=text.slice(text.indexOf(find));text=text_init.slice(0,text_init.indexOf(end)).replace(find,"");return text}else{return false}},insertNamesParentsTitlesFlags:function(){if($("body").hasClass("feira-de-vinhos-home")){if($(".container-pais-favorito .box-banner").length==0){setTimeout(function(){Institutional.insertNamesParentsTitlesFlags()},100);return}var flags=$(".container-pais-favorito .box-banner");flags.each(function(i,e){flag=$(e);flag.append($("<span>"+flag.find("img").attr("alt")+"</span>"))})}},modalCursosVideos:function(){$(".btn-assistir a").attr("data-toggle","modal");$(".btn-assistir a").on("click",function(){var url=$(this).attr("link-video");$("#SNFV-iframeVideo").attr("src",url)});$("#modal-cursos-lives").on("hide.bs.modal",function(){$("#SNFV-iframeVideo").attr("src","")})},modalCursosVideosHome:function(){$(".grid-cursos-feira-de-vinhos a").on("click",function(){var url=$(this).attr("link-video");console.log(url);$(".modal-body").find("iframe").attr("src",url)});$(".modal").on("hide.bs.modal",function(){$(".modal-body").find("iframe").attr("src","")})},selectStyledFeiraDeVinhos:function(arr_opts,el_select,el_filter,callback){el_select.each(function(){var $this=$(this);var numberOfOptions=arr_opts.length;$this.addClass("select-hidden");$this.wrap('<div class="select"></div>');$this.after('<div class="select-styled"></div>');var $styledSelect=$this.next("div.select-styled");$styledSelect.text($this.children("option").eq(0).text());var $list=$("<ul />",{class:"select-options"}).insertAfter($styledSelect);for(var i=0;i<numberOfOptions;i++){$("<li />",{text:arr_opts[i],rel:arr_opts[i]}).appendTo($list);$("<option />",{text:arr_opts[i],value:arr_opts[i]}).appendTo($this)}var $listItems=$list.children("li");$styledSelect.click(function(e){e.stopPropagation();$("div.select-styled.active").not(this).each(function(){$(this).removeClass("active").next("ul.select-options").hide()});$(this).toggleClass("active").next("ul.select-options").toggle()});$listItems.click(function(e){e.stopPropagation();$styledSelect.text($(this).text()).removeClass("active");$this.val($(this).attr("rel"));Institutional.filterTermSelected($(this).attr("rel"),el_filter,callback);$list.hide()});$(document).click(function(){$styledSelect.removeClass("active");$list.hide()})})},filterTermSelected:function(term,el,callback){$(el).each(function(i,e){if($(e).html().indexOf(term)!=-1){$(e).addClass("filter")}else{$(e).removeClass("filter")}if($(el).length-1==i){callback()}})},initSelectFilterFeiraDeVinhos:function(){if($("body").hasClass("feira-de-vinhos-home")){var arr_elements=$(".container-lives-cursos-feira-de-vinhos .slider-cursos-feira-de-vinhos .nome-palestrante-curso");var new_arr_opts=[];arr_elements.each(function(i,e){if(new_arr_opts.indexOf(e.innerHTML)==-1&&e.innerHTML!="")new_arr_opts.push(e.innerHTML)});Institutional.selectStyledFeiraDeVinhos(new_arr_opts,$(".container-lives-cursos-feira-de-vinhos #select-palestrante"),$(".slider-cursos-feira-de-vinhos .content-curso-block"),function(){$(".slider-cursos-feira-de-vinhos").slick("slickUnfilter");$(".slider-cursos-feira-de-vinhos").slick("slickFilter",".filter")})}},init:function(){this.slickSliderBannerPrincipalHomeFeiraDeVinhos();this.initSlickSliderBannerLivesHomeFeiraDeVinhos();this.slickSliderBannerVinhosArmonizamHomeFeiraDeVinhos();this.slickSliderBannerVinhosPorCategoria();this.slickSliderBandeirasPaises();this.slickSliderCursosHomeFeiraDeVinhos();this.explodeTextCursosFeiraDeVinhos();this.insertNamesParentsTitlesFlags();this.actionsfilterDataFeiraDeVinhos();this.modalCursosVideos();this.modalCursosVideosHome();this.initSelectFilterFeiraDeVinhos()},ajaxStop:function(){},windowOnload:function(){}};var Orders={init:function(){Orders.primeFlag()},ajaxStop:function(){},windowOnload:function(){},bootstrapCssFix:function(){var styleSheets=document.styleSheets;for(var i=0;i<styleSheets.length;i++){if((styleSheets[i].href||"").indexOf("io.vtex.com.br/front-libs/bootstrap/2.3.2/css/bootstrap.min.css")>-1||(styleSheets[i].href||"").indexOf("io.vtex.com.br/front-libs/bootstrap/2.3.2/css/bootstrap-responsive.min.css")>-1){styleSheets[i].disabled=true}}},primeFlag:function(){var usuarioPrime=false;vtexjs.checkout.getOrderForm().done(function(orderForm){if(orderForm.clientProfileData&&orderForm.clientProfileData.email){var emailUsuario=orderForm.clientProfileData.email;$.ajax({type:"GET",method:"GET",url:"/api/dataentities/CL/search?_where=(Prime=true AND email="+emailUsuario+")&_fields=Prime,email",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"}}).done(function(response){console.log(response.length);if(response.length>0){usuarioPrime=true;fetch("https://mauricio.supernosso.com.br/IntegraSnc_Core/rest/IntegraSnc/GetDataFimPrime?Email="+emailUsuario,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(res){res.text()}).then(function(res){if(usuarioPrime){var intervalToManipulateElement=setInterval(function(){if(document.querySelector(".vtex-account__page-body.vtex-account__subscriptions-list")){clearInterval(intervalToManipulateElement);$(".vtex-account__page-body.vtex-account__subscriptions-list").hide();$(".vtex-account__page").append('<div class="primeBoxAssinaturas"><div class="primeContainer"><b>Assinatura Prime</b></div></div>')}},500)}})}})}})}}}catch(e){typeof console!=="undefined"&&typeof console.error==="function"&&console.error("Houve um erro nos objetos. Detalhes: "+e.message)}try{(function(){var body,ajaxStop,windowLoad;windowLoad=function(){Common.windowOnload();if(body.is(".home"))Home.windowOnload();else if(body.is(".resultado-busca, .departamento, .categoria"))Search.windowOnload();else if(body.is(".produto"))Product.windowOnload();else if(body.is(".listas, .giftlist"))List.windowOnload();else if(body.is(".institucional"))Institutional.windowOnload();else if(body.is(".orders"))Orders.windowOnload()};ajaxStop=function(){Common.ajaxStop();if(body.is(".home"))Home.ajaxStop();else if(body.is(".resultado-busca, .departamento, .categoria"))Search.ajaxStop();else if(body.is(".produto"))Product.ajaxStop();else if(body.is(".listas, .giftlist"))List.ajaxStop();else if(body.is(".institucional"))Institutional.ajaxStop();else if(body.is(".orders"))Orders.ajaxStop()};$(function(){body=$(document.body);Common.init();if(body.is(".home"))Home.init();else if(body.is(".resultado-busca, .departamento, .categoria")){Search.isSearch=$(document.body).is(".resultado-busca");Search.isDepartament=$(document.body).is(".departamento");Search.isCategory=$(document.body).is(".categoria");Search.init()}else if(body.is(".produto"))Product.init();else if(body.is(".listas, .giftlist"))List.init();else if(body.is(".institucional"))Institutional.init();else if(body.is(".orders"))Orders.init();$(document).ajaxStop(ajaxStop);$(window).load(windowLoad);body.addClass("jsFullLoaded");Common.ready()});Common.run();if(location.pathname.substr(location.pathname.length-2,2).toLowerCase()=="/p")Product.run();else if(location.pathname.search(/^(\/giftlist|\/list\/)/)==0)List.run()})()}catch(e){typeof console!=="undefined"&&typeof console.error==="function"&&$("body").addClass("jsFullLoaded jsFullLoadedError")&&console.error("Houve um erro ao iniciar os objetos. Detalhes: "+e.message)}(function(){"function"!==typeof $.cookie&&function(c){"function"===typeof define&&define.amd?define(["jquery"],c):"object"===typeof exports?c(require("jquery")):c(jQuery)}(function(c){function p(a){a=e.json?JSON.stringify(a):String(a);return e.raw?a:encodeURIComponent(a)}function n(a,g){var b;if(e.raw)b=a;else a:{var d=a;0===d.indexOf('"')&&(d=d.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{d=decodeURIComponent(d.replace(l," "));b=e.json?JSON.parse(d):d;break a}catch(h){}b=void 0}return c.isFunction(g)?g(b):b}var l=/\+/g,e=c.cookie=function(a,g,b){if(1<arguments.length&&!c.isFunction(g)){b=c.extend({},e.defaults,b);if("number"===typeof b.expires){var d=b.expires,h=b.expires=new Date;h.setTime(+h+864e5*d)}return document.cookie=[e.raw?a:encodeURIComponent(a),"=",p(g),b.expires?"; expires="+b.expires.toUTCString():"",b.path?"; path="+b.path:"",b.domain?"; domain="+b.domain:"",b.secure?"; secure":""].join("")}for(var d=a?void 0:{},h=document.cookie?document.cookie.split("; "):[],m=0,l=h.length;m<l;m++){var f=h[m].split("="),k;k=f.shift();k=e.raw?k:decodeURIComponent(k);f=f.join("=");if(a&&a===k){d=n(f,g);break}a||void 0===(f=n(f))||(d[k]=f)}return d};e.defaults={};c.removeCookie=function(a,e){if(void 0===c.cookie(a))return!1;c.cookie(a,"",c.extend({},e,{expires:-1}));return!c.cookie(a)}})})();(function(){function b(a){var b=$("ul.thumbs").not(a);a.html(b.html());"function"===typeof clickThumbs&&clickThumbs();a.trigger("QuatroDigital.pt_callback",[a])}"function"!==typeof $.fn.QD_productThumbs&&($.fn.QD_productThumbs=function(){var a=$(this);return a.length?$.extend({},a,new b(a)):a},$(function(){$(".QD-thumbs").QD_productThumbs()}))})();(function(u){try{var a=jQuery,r=a({}),n=function(a,d){if("object"===typeof console&&"undefined"!==typeof console.error&&"undefined"!==typeof console.info&&"undefined"!==typeof console.warn){var b;"object"===typeof a?(a.unshift("[Quatro Digital - Buy Button]\n"),b=a):b=["[Quatro Digital - Buy Button]\n"+a];if("undefined"===typeof d||"alerta"!==d.toLowerCase()&&"aviso"!==d.toLowerCase())if("undefined"!==typeof d&&"info"===d.toLowerCase())try{console.info.apply(console,b)}catch(h){try{console.info(b.join("\n"))}catch(k){}}else try{console.error.apply(console,b)}catch(h){try{console.error(b.join("\n"))}catch(k){}}else try{console.warn.apply(console,b)}catch(h){try{console.warn(b.join("\n"))}catch(k){}}}},t={timeRemoveNewItemClass:5e3,isSmartCheckout:!0,buyButton:".productInformationWrapper  a.buy-button",buyQtt:"input.buy-in-page-quantity",selectSkuMsg:"javascript:",autoWatchBuyButton:!0,buyIfQuantityZeroed:!1,fakeRequest:!1,productPageCallback:function(g,d,b){a("body").is(".productQuickView")&&("success"===d?alert("Produto adicionado ao carrinho!"):(alert("Ooops! Algo saiu errado ao tentar adicionar seu produto ao carrinho. \n Vou te redirecionar para o carrinho."),("object"===typeof parent?parent:document).location.href=b))},isProductPage:function(){return a("body").is("#produto, .produto")},execDefaultAction:function(a){return!1},allowBuyClick:function(){return!0},callback:function(){},asyncCallback:function(){}};a.QD_buyButton=function(g,d,b){function h(a){f.isSmartCheckout?a.data("qd-bb-click-active")||(a.data("qd-bb-click-active",1),a.on("click.qd_bb_buy_sc",function(a){if(!f.allowBuyClick())return!0;if(!0!==m.clickBuySmartCheckout.call(this))return a.preventDefault(),!1})):alert("Método descontinuado!")}function k(e){e=e||a(f.buyButton);e.each(function(){var c=a(this);c.is(".qd-sbb-on")||(c.addClass("qd-sbb-on"),c.is(".btn-add-buy-button-asynchronous")&&!c.is(".remove-href")||c.data("qd-bb-active")||(c.data("qd-bb-active",1),c.children(".qd-bb-productAdded").length||c.append('<span class="qd-bb-productAdded"><i class="icon-thumbs-up"></i> <span>Produto adicionado</span></span>'),c.is(".buy-in-page-button")&&f.isProductPage()&&l.call(c),h(c)))});f.isProductPage()&&!e.length&&n("Oooops!\nAparentemente esta é uma página de produto porém não encontrei nenhum botão comprar!\nVerifique se é este mesmo o seletor: '"+e.selector+"'.","info")}var f=b||f,p=a(g),m=this;window._Quatro_Digital_dropDown=window._Quatro_Digital_dropDown||{};window._QuatroDigital_CartData=window._QuatroDigital_CartData||{};m.prodAdd=function(e,c){p.addClass("qd-bb-itemAddCartWrapper qd-bb-lightBoxProdAdd");a("body").addClass("qd-bb-lightBoxBodyProdAdd");var b=a(f.buyButton).filter("[href='"+(e.attr("href")||"---")+"']").add(e);b.addClass("qd-bb-itemAddBuyButtonWrapper");setTimeout(function(){p.removeClass("qd-bb-itemAddCartWrapper");b.removeClass("qd-bb-itemAddBuyButtonWrapper")},f.timeRemoveNewItemClass);window._Quatro_Digital_dropDown.getOrderForm=void 0;if("undefined"!==typeof d&&"function"===typeof d.getCartInfoByUrl)return f.isSmartCheckout||(n("função descontinuada"),d.getCartInfoByUrl()),window._QuatroDigital_DropDown.getOrderForm=void 0,d.getCartInfoByUrl(function(c){window._Quatro_Digital_dropDown.getOrderForm=c;a.fn.simpleCart(!0,void 0,!0)},{lastSku:c});window._Quatro_Digital_dropDown.allowUpdate=!0;a.fn.simpleCart(!0);a(window).trigger("QuatroDigital.qd_sc_prodAdd",[e,c,b])};(function(){if(f.isSmartCheckout&&f.autoWatchBuyButton){var e=a(".btn-add-buy-button-asynchronous");e.length&&k(e)}})();var l=function(){var e=a(this);"undefined"!==typeof e.data("buyButton")?(e.unbind("click"),h(e)):(e.bind("mouseenter.qd_bb_buy_sc",function(c){e.unbind("click");h(e);a(this).unbind(c)}),a(window).load(function(){e.unbind("click");h(e);e.unbind("mouseenter.qd_bb_buy_sc")}))};m.clickBuySmartCheckout=function(){var e=a(this),c=e.attr("href")||"";if(-1<c.indexOf(f.selectSkuMsg))return!0;c=c.replace(/redirect=(false|true)/gi,"").replace("?","?redirect=false&").replace(/&&/gi,"&");if(f.execDefaultAction(e))return e.attr("href",c.replace("redirect=false","redirect=true")),!0;c=c.replace(/http.?:/i,"");r.queue(function(b){if(!f.buyIfQuantityZeroed&&!/(&|\?)qty=[1-9][0-9]*/gi.test(c))return b();var d=function(b,d){var g=c.match(/sku=([0-9]+)/gi),h=[];if("object"===typeof g&&null!==g)for(var k=g.length-1;0<=k;k--){var l=parseInt(g[k].replace(/sku=/gi,""));isNaN(l)||h.push(l)}f.productPageCallback.call(this,b,d,c);m.buyButtonClickCallback.call(this,b,d,c,h);m.prodAdd(e,c.split("ku=").pop().split("&").shift());"function"===typeof f.asyncCallback&&f.asyncCallback.call(this);a(window).trigger("productAddedToCart");a(window).trigger("cartProductAdded.vtex")};f.fakeRequest?(d(null,"success"),b()):a.ajax({url:c,complete:d,mimeType:"text/html"}).always(function(){b()})})};m.buyButtonClickCallback=function(a,c,b,d){try{"success"===c&&"object"===typeof window.parent&&"function"===typeof window.parent._QuatroDigital_prodBuyCallback&&window.parent._QuatroDigital_prodBuyCallback(a,c,b,d)}catch(v){n("Problemas ao tentar comunicar a página que o produto foi aicionado ao carrinho.")}};k();"function"===typeof f.callback?f.callback.call(this):n("Callback não é uma função")};var l=a.Callbacks();a.fn.QD_buyButton=function(g,d){var b=a(this);"undefined"!==typeof d||"object"!==typeof g||g instanceof a||(d=g,g=void 0);var h;l.add(function(){b.children(".qd-bb-itemAddWrapper").length||b.prepend('<span class="qd-bb-itemAddWrapper"><span class="qd-bb-itemAddIco"></span></span>');h=new a.QD_buyButton(b,g,a.extend({},t,d))});l.fire();a(window).on("QuatroDigital.qd_bb_prod_add",function(a,b,d){h.prodAdd(b,d)});return a.extend(b,h)};var q=0;a(document).ajaxSend(function(a,d,b){-1<b.url.toLowerCase().indexOf("/checkout/cart/add")&&(q=(b.url.match(/sku=([0-9]+)/i)||[""]).pop())});a(window).bind("productAddedToCart.qdSbbVtex",function(){a(window).trigger("QuatroDigital.qd_bb_prod_add",[new a,q])});a(document).ajaxStop(function(){l.fire()})}catch(g){"undefined"!==typeof console&&"function"===typeof console.error&&console.error("Oooops! ",g)}})(this);(function(x){var d=jQuery;if("function"!==typeof d.fn.QD_smartQuantity){var g=function(d,a){if("object"===typeof console&&"function"===typeof console.error&&"function"===typeof console.info&&"function"===typeof console.warn){var f;"object"===typeof d?(d.unshift("[Quatro Digital - Smart Quantity]\n"),f=d):f=["[Quatro Digital - Smart Quantity]\n"+d];if("undefined"===typeof a||"alerta"!==a.toLowerCase()&&"aviso"!==a.toLowerCase())if("undefined"!==typeof a&&"info"===a.toLowerCase())try{console.info.apply(console,f)}catch(k){console.info(f.join("\n"))}else try{console.error.apply(console,f)}catch(k){console.error(f.join("\n"))}else try{console.warn.apply(console,f)}catch(k){console.warn(f.join("\n"))}}},m={buyButton:".buy-button",qttInput:".qd-sq-quantity",btnMore:".qd-sq-more",btnMinus:".qd-sq-minus",initialValue:1,minimumValue:1,minToBuy:null,setQuantityByUrl:!0},n=function(q,a){function f(c,e,b){a.setQuantityByUrl?c.val(((location.search||"").match(r)||[a.initialValue]).pop()):c.val(a.initialValue);c.change(function(c,b){try{if("qd_ssl_trigger"!=b){var e=d(this),h=parseInt(e.val().replace(u,""));var f=!isNaN(h)&&h>a.minimumValue?h:a.minimumValue;null!=a.minToBuy&&f<a.minToBuy&&f!=a.minimumValue&&(f=a.minToBuy,"qd_ssl_trigger_less"==b&&(f=0));e.val(f);e.trigger("QuatroDigital.sq_change",this)}}catch(v){g(v.message)}});c.focusin(function(){d(this).trigger("QuatroDigital.sq_focusin",this)});e.click(function(b){b.preventDefault();c.val((parseInt(c.val())||a.minimumValue)+1).change()});b.click(function(b){b.preventDefault();b=(parseInt(c.val())||a.minimumValue+1)-1;null!=a.minToBuy&&b<a.minToBuy&&(b=0);c.val(b).change()});c.change()}function k(c,e,b){c.on("QuatroDigital.sq_change",function(){(d(this).val()||0)<=a.minimumValue?(b.addClass("qd-sq-inactive"),e.removeClass("qd-sq-inactive")):(e.addClass("qd-sq-inactive"),b.removeClass("qd-sq-inactive"))})}function m(c){c.one("QuatroDigital.sq_qtt_min_change",function(c,b){a.minToBuy=b;d(this).change()})}function n(c,e){c.on("QuatroDigital.sq_change",function(){try{if(!(e[0].hostname||"").length)return g("A quantidade não foi inserida no bt comprar pois o mesmo não possui uma URL","info");var b=e[0].search||"";-1<b.toLowerCase().indexOf("qty=")?e[0].search=b.replace(p,"qty="+(parseInt(c.val())||("number"==typeof a.minimumValue?a.minimumValue:1))+"&"):e[0].search="qty="+(parseInt(c.val())||("number"==typeof a.minimumValue?a.minimumValue:1))+"&"+(e[0].search||"").replace(p,"");e.not(":first").each(function(){this.href=e[0].href});var d=((e.first().attr("href")||"").match(w)||[""]).pop()+"";c.attr("data-sku-id",d);if(d.length&&"object"===typeof skuJson&&!c.attr("data-sku-price"))for(b=0;b<skuJson.skus.length;b++)skuJson.skus[b].sku==d&&c.attr("data-sku-price",skuJson.skus[b].bestPrice)}catch(l){g(l.message)}})}var u=/[^0-9-]/gi,r=/qty=([0-9]+)/i,w=/sku=([0-9]+)/i,p=/qty=[0-9]+&?/gi;q.each(function(){try{var c=d(this),e=c.find(a.buyButton),b=c.find(a.qttInput),h=c.find(a.btnMore),l=c.find(a.btnMinus);if(!e.length&&null!==a.buyButton||!b.length)return g("O plugin parou por aqui! Não foram encontrados o botão comprar e o campo de quantidade","alerta");if(b.is(".qd-sq-on"))return g(["Execução ignorada pois este input já possui o plugin aplicado. Input: ",b],"info");b.addClass("qd-sq-on");k(b,h,l);m(b);null!==a.buyButton&&n(b,e);f(b,h,l);d(window).on("vtex.sku.selected skuSelected.vtex",function(){b.change()})}catch(t){g(t.message)}})};d.fn.QD_smartQuantity=function(g){var a=d(this);a.qdPlugin=new n(a,d.extend({},m,g));d(window).trigger("QuatroDigital.sq_callback");return a};d(function(){d(".qd_auto_smart_quantity").QD_smartQuantity()})}})(this);